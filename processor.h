#pragma once
#include "feeder.h"
#include "4051.h"
#define LAG4051  100


static spawner o;
#define NPSF 9
#define THRESHOLD 8
static psf   PSF[NPSF]; // Parameter smooth filters
static gator GTR[NPSF];



void get_parameters()
{
    // Upper row //////////////////////////////////////////////////////////////////////////////
    // Cutoff /////////////////////////////////////////////////////////////////////////////////
    adc_select_input(1);
    o.pot[6] = gate(&GTR[6], psf_process(&PSF[6], adc_read()), THRESHOLD); // Cutoff
    // 4051 ///////////////////////////////////////////////////////////////////////////////////
    adc_select_input(2);
    // Volume /////////////////////////////////////////////////////////////////////////////////
    set4051_1(LAG4051);
    o.pot[8] = gate(&GTR[1], adc_read(), THRESHOLD);
    // Resonance //////////////////////////////////////////////////////////////////////////////
    set4051_3(LAG4051);
    o.pot[7] = gate(&GTR[0], psf_process(&PSF[0], adc_read()), THRESHOLD); // Q

    // Lower row //////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_7(LAG4051);
    o.pot[0] = gate(&GTR[7], psf_process(&PSF[7], adc_read()), THRESHOLD);
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_5(LAG4051);
    o.pot[1] = gate(&GTR[5], psf_process(&PSF[5], adc_read()), THRESHOLD);
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_2(LAG4051);
    o.pot[2] = gate(&GTR[2], psf_process(&PSF[2], adc_read()), THRESHOLD);
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_4(LAG4051);
    o.pot[3] = gate(&GTR[4], psf_process(&PSF[4], adc_read()), THRESHOLD);
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_0(LAG4051);
    o.pot[4] = gate(&GTR[8], psf_process(&PSF[8], adc_read()), THRESHOLD);
    ///////////////////////////////////////////////////////////////////////////////////////////
    set4051_6(LAG4051);
    o.pot[5] = gate(&GTR[3], psf_process(&PSF[3], adc_read()), THRESHOLD); 

}